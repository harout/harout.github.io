"use strict";(self["webpackChunkyt_stats_quasar"]=self["webpackChunkyt_stats_quasar"]||[]).push([[740],{3308:(e,n,t)=>{t.d(n,{Z:()=>o});t(71),t(9377),t(7664);var a=t(6395),r=t(2661);class o{constructor(){}static get unngroupedGroupingName(){return"[Ungrouped]"}async __makeFakeData(e,n){const t=r.ZP.extractDate(e,"YYYY/MM/DD"),a=r.ZP.extractDate(n,"YYYY/MM/DD"),o={};var l=t;const s={inclusiveFrom:!0,inclusiveTo:!0},i=await this.getChannels();while(r.ZP.isBetweenDates(l,t,a,s)){const e=r.ZP.formatDate(l,"MMM D, YYYY");o[e]={},i.forEach((n=>{o[e][n.id]=Math.round(5e3*Math.random())})),l=r.ZP.addToDate(l,{days:1})}return Promise.resolve(o)}async fetchData(e,n){const t=await this.__makeFakeData(e,n),a=await this.getChannelGroupings(),r=this._getChannelIdToGroupingMap(a),o=this._calculateViewsByGrouping(t,a,r),l=this._calculateViewsByDayAndGrouping(t,a,r),s=this._calculateViewsByDayOfWeekAndGrouping(t,a,r),i=this._calculateViewsByChannelAndCollectByGrouping(t,a,o),c=this._calculateViewsByDayAndChannel(t,a),u={viewsByGrouping:o,viewsByDayAndGrouping:l,viewsByDayOfWeekAndGrouping:s,viewsByChannelCollectedByGrouping:i,viewsByDayAndChannel:c};return Promise.resolve(u)}_calculateViewsByDayAndGrouping(e,n,t){const a=Object.keys(e),o=[];return Object.keys(n).forEach((n=>{const l=[];a.forEach((a=>{const o=e[a];var s=0;for(const[e,r]of Object.entries(o))t[e]===n&&(s+=r);l.push([r.ZP.extractDate(a,"MMM D, YYYY").getTime(),s])})),o.push({name:n,data:l})})),o}_calculateViewsByDayOfWeekAndGrouping(e,n,t){const a=Object.keys(e),o={};return Object.keys(n).forEach((e=>{o[e]={name:e,data:[0,0,0,0,0,0,0]}})),a.forEach((n=>{const a=r.ZP.extractDate(n,"MMM D, YYYY").getDay(),l=e[n];for(const[e,r]of Object.entries(l)){const n=t[e];o[n].data[a]+=r}})),Object.values(o)}_calculateViewsByGrouping(e,n,t){const a={};Object.keys(n).forEach((e=>{a[e]=0}));for(const[r,o]of Object.entries(e))for(const[e,n]of Object.entries(o)){const r=t[e];a[r]+=n}return a}_calculateViewsByDayAndChannel(e,n){const t=Object.keys(e),a=Object.values(n).flat(),o=[];return a.forEach((n=>{const a=[];t.forEach((t=>{const o=e[t],l=r.ZP.extractDate(t,"MMM D, YYYY").getTime();o.hasOwnProperty(n.id)?a.push([l,o[n.id]]):a.push([l,0])})),o.push({name:n.name,data:a})})),o}_calculateViewsByChannelAndCollectByGrouping(e,n,t){const a={};for(const[o,l]of Object.entries(n))l.forEach((e=>{a[e.id]=0}));for(const[o,l]of Object.entries(e))for(const[e,n]of Object.entries(l))a[e]+=n;const r=[];for(const[o,l]of Object.entries(n)){const e=[];l.forEach((n=>{e.push({x:n.name,y:a[n.id],url:n.url,shareOfGrouping:(100*a[n.id]/t[o]).toFixed(1)})})),r.push({name:o,data:e})}return r}_getChannelIdToGroupingMap(e){const n={};for(const[t,a]of Object.entries(e))a.forEach((e=>{n[e.id]=t}));return n}saveCustomChannelGroupings(e){const n=Object.keys(e);n.forEach((n=>{0==e[n].length&&delete e[n]})),a.Z.set("customChannelGroupings",e)}getCustomChannelGroupings(){return a.Z.getItem("customChannelGroupings")}async getChannels(){const e=await this.getDefaultChannelGroupings(),n=Object.values(e).flat();return Promise.resolve(Object.values(n).flat())}getDefaultChannelGroupings(){const e={"ghkg hkhkhkhl":[{name:"channel a",id:1,url:"http://example.org/a"},{name:"channel b",id:2,url:"http://example.org/b"},{name:"channel c",id:3,url:"http://example.org/c"},{name:"channel d",id:4,url:"http://example.org/d"}],asdfdafsdfadfadfdfs:[{name:"channel e",id:5,url:"http://example.org/e"},{name:"channel f",id:6,url:"http://example.org/f"},{name:"channel g",id:7,url:"http://example.org/g"}],qqqqqq:[{name:"channel h",id:8,url:"http://example.org/h"},{name:"channel i",id:9,url:"http://example.org/i"},{name:"channel j",id:10,url:"http://example.org/j"}],rrasdfasdadfdsfdasfadsdfdf:[{name:"channel k",id:11,url:"http://example.org/k"},{name:"channel l",id:12,url:"http://example.org/l"},{name:"channel m",id:13,url:"http://example.org/m"},{name:"channel n",id:14,url:"http://example.org/n"},{name:"channel o",id:15,url:"http://example.org/o"},{name:"channel p",id:16,url:"http://example.org/p"}]};return Promise.resolve(e)}async getChannelGroupings(){var e=await this.getDefaultChannelGroupings(),n=this.getCustomChannelGroupings();if(null===n)return Promise.resolve(e);const t=Object.values(n).flat().map((e=>e.id)),a=Object.values(e).flat().map((e=>e.id));if(t.length==a.length)return Promise.resolve(n);const r=a.filter((e=>!t.includes(e))),l=o.unngroupedGroupingName;n.hasOwnProperty(l)||(n[l]=[]);const s=Object.values(e).flat(),i=s.filter((e=>r.includes(e.id)));n[l]=n[l].concat(i);const c=Object.keys(n);return c.forEach((e=>{0==n[e].length&&delete n[e]})),this.saveCustomChannelGroupings(n),Promise.resolve(n)}}},6740:(e,n,t)=>{t.r(n),t.d(n,{default:()=>M});var a=t(3673),r=t(2323);const o=(0,a.HX)("data-v-d023ed74");(0,a.dD)("data-v-d023ed74");const l={class:"row q-ml-sm"},s={class:"list-group-item"},i={class:"row q-ml-sm q-mt-md"},c={class:"col-xs-12 col-sm-12 col-md-12"},u={class:"row items-center justify-center full-height full-width text-center"},h={class:"row q-ml-sm q-mt-xl q-mb-xl"},p={class:"col-xs-6 col-sm-6 col-md-6"},m={class:"row items-center justify-center full-height full-width text-center"},d={class:"col-xs-6 col-sm-6 col-md-6"},g={class:"row items-center justify-center full-height full-width text-center"};(0,a.Cn)();const f=o(((e,n,t,f,v,C)=>{const y=(0,a.up)("ChannelGroupingName"),G=(0,a.up)("draggable"),w=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.j4)(a.HY,null,[(0,a.Wm)("div",l,[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(f.lists,((e,n)=>((0,a.wg)(),(0,a.j4)("div",{key:n,class:"col-xs-12 col-sm-12 col-md-4"},[(0,a.Wm)(y,{"channel-grouping-name":n,onChannelGroupingNameChanged:f.handleChannelGroupingNameChange},null,8,["channel-grouping-name","onChannelGroupingNameChanged"]),(0,a.Wm)(G,{tag:"ul",class:"list-group",list:e,group:"ppl","item-key":"name"},{item:o((({element:e,index:n})=>[(0,a.Wm)("li",s,(0,r.zw)(e.name)+" "+(0,r.zw)(n),1)])),_:2},1032,["list"])])))),128))]),(0,a.Wm)("div",i,[(0,a.Wm)("div",c,[(0,a.Wm)("div",u,[(0,a.Wm)(w,{round:"",color:"primary",icon:"add",onClick:f.addChannelGroup},null,8,["onClick"])])])]),(0,a.Wm)("div",h,[(0,a.Wm)("div",p,[(0,a.Wm)("div",m,[(0,a.Wm)(w,{color:"secondary",icon:"undo",label:"Reset",onClick:f.resetChannelGroupings},null,8,["onClick"])])]),(0,a.Wm)("div",d,[(0,a.Wm)("div",g,[(0,a.Wm)(w,{color:"primary",icon:"done",label:"Done",onClick:f.saveChannelGroupings},null,8,["onClick"])])])])],64)}));var v=t(1959),C=t(9582),y=t(8603),G=t(470),w=t.n(G),D=(t(71),t(8880));function b(e,n,t,o,l,s){return(0,a.wg)(),(0,a.j4)("h5",{contenteditable:"",onBlur:n[1]||(n[1]=(...e)=>o.onEditGroupingName&&o.onEditGroupingName(...e)),onKeydown:n[2]||(n[2]=(0,D.D2)(((...e)=>o.onEditGroupingName&&o.onEditGroupingName(...e)),["enter"]))},(0,r.zw)(o.currentChannelGroupingName),33)}const k={props:{channelGroupingName:{required:!0,type:String}},emits:["channelGroupingNameChanged"],setup(e,{emit:n}){var t=(0,v.SU)(e.channelGroupingName);const a=function(e){e.preventDefault(),e.target.blur(),n("channelGroupingNameChanged",{previousName:t,newName:e.target.innerHTML}),t=e.target.innerHTML};return{onEditGroupingName:a,currentChannelGroupingName:t}}};k.render=b;const j=k;var x=t(3308);const O={display:"Two Lists",order:1,components:{draggable:w(),ChannelGroupingName:j},setup(e,{emit:n}){const t=(0,C.tv)(),a=new x.Z,r=(0,v.iH)([]);a.getChannelGroupings().then((e=>{r.value=e})).catch((e=>console.log("blah blah")));const o=function(e){e.preventDefault();var n=1,t="New Grouping "+String(n);while(1){if(!r.value.hasOwnProperty(t))break;n++,t="New Grouping "+String(n)}r.value[t]=[]},l=function(e){e.preventDefault();JSON.stringify(r.value);a.saveCustomChannelGroupings(r.value),t.push("/")},s=function(e){e.preventDefault(),a.getDefaultChannelGroupings().then((e=>{r.value=e})).then(a.saveCustomChannelGroupings(r.value)).catch((e=>{throw"Error resetting channel groupings."}))},i=function(e){var n=e.newName;if(n!==e.previousName){while(r.value.hasOwnProperty(n)||n===x.Z.unngroupedGroupingName)n+="_";r.value=(0,y.mapKeys)(r.value,(function(t,a){return a===e.previousName?n:a}))}};return{lists:r,addChannelGroup:o,handleChannelGroupingNameChange:i,resetChannelGroupings:s,saveChannelGroupings:l}}};var N=t(6281),Y=t(7518),_=t.n(Y);O.render=f,O.__scopeId="data-v-d023ed74";const M=O;_()(O,"components",{QBtn:N.Z})}}]);