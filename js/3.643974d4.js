"use strict";(self["webpackChunkyt_stats_quasar"]=self["webpackChunkyt_stats_quasar"]||[]).push([[3],{3308:(e,a,t)=>{t.d(a,{Z:()=>o});t(71),t(9377),t(7664);var n=t(6395),s=t(2661);class o{constructor(){}static get unngroupedGroupingName(){return"[Ungrouped]"}async __makeFakeData(e,a){const t=s.ZP.extractDate(e,"YYYY/MM/DD"),n=s.ZP.extractDate(a,"YYYY/MM/DD"),o={};var r=t;const l={inclusiveFrom:!0,inclusiveTo:!0},i=await this.getChannels();while(s.ZP.isBetweenDates(r,t,n,l)){const e=s.ZP.formatDate(r,"MMM D, YYYY");o[e]={},i.forEach((a=>{o[e][a.id]=Math.round(5e3*Math.random())})),r=s.ZP.addToDate(r,{days:1})}return Promise.resolve(o)}async fetchData(e,a){const t=await this.__makeFakeData(e,a),n=await this.getChannelGroupings(),s=this._getChannelIdToGroupingMap(n),o=this._calculateViewsByGrouping(t,n,s),r=this._calculateViewsByDayAndGrouping(t,n,s),l=this._calculateViewsByDayOfWeekAndGrouping(t,n,s),i=this._calculateViewsByChannelAndCollectByGrouping(t,n,o),c=this._calculateViewsByDayAndChannel(t,n),u={viewsByGrouping:o,viewsByDayAndGrouping:r,viewsByDayOfWeekAndGrouping:l,viewsByChannelCollectedByGrouping:i,viewsByDayAndChannel:c};return Promise.resolve(u)}_calculateViewsByDayAndGrouping(e,a,t){const n=Object.keys(e),o=[];return Object.keys(a).forEach((a=>{const r=[];n.forEach((n=>{const o=e[n];var l=0;for(const[e,s]of Object.entries(o))t[e]===a&&(l+=s);r.push([s.ZP.extractDate(n,"MMM D, YYYY").getTime(),l])})),o.push({name:a,data:r})})),o}_calculateViewsByDayOfWeekAndGrouping(e,a,t){const n=Object.keys(e),o={};return Object.keys(a).forEach((e=>{o[e]={name:e,data:[0,0,0,0,0,0,0]}})),n.forEach((a=>{const n=s.ZP.extractDate(a,"MMM D, YYYY").getDay(),r=e[a];for(const[e,s]of Object.entries(r)){const a=t[e];o[a].data[n]+=s}})),Object.values(o)}_calculateViewsByGrouping(e,a,t){const n={};Object.keys(a).forEach((e=>{n[e]=0}));for(const[s,o]of Object.entries(e))for(const[e,a]of Object.entries(o)){const s=t[e];n[s]+=a}return n}_calculateViewsByDayAndChannel(e,a){const t=Object.keys(e),n=Object.values(a).flat(),o=[];return n.forEach((a=>{const n=[];t.forEach((t=>{const o=e[t],r=s.ZP.extractDate(t,"MMM D, YYYY").getTime();o.hasOwnProperty(a.id)?n.push([r,o[a.id]]):n.push([r,0])})),o.push({name:a.name,data:n})})),o}_calculateViewsByChannelAndCollectByGrouping(e,a,t){const n={};for(const[o,r]of Object.entries(a))r.forEach((e=>{n[e.id]=0}));for(const[o,r]of Object.entries(e))for(const[e,a]of Object.entries(r))n[e]+=a;const s=[];for(const[o,r]of Object.entries(a)){const e=[];r.forEach((a=>{e.push({x:a.name,y:n[a.id],url:a.url,shareOfGrouping:(100*n[a.id]/t[o]).toFixed(1)})})),s.push({name:o,data:e})}return s}_getChannelIdToGroupingMap(e){const a={};for(const[t,n]of Object.entries(e))n.forEach((e=>{a[e.id]=t}));return a}saveCustomChannelGroupings(e){const a=Object.keys(e);a.forEach((a=>{0==e[a].length&&delete e[a]})),n.Z.set("customChannelGroupings",e)}getCustomChannelGroupings(){return n.Z.getItem("customChannelGroupings")}async getChannels(){const e=await this.getDefaultChannelGroupings(),a=Object.values(e).flat();return Promise.resolve(Object.values(a).flat())}getDefaultChannelGroupings(){const e={"ghkg hkhkhkhl":[{name:"channel a",id:1,url:"http://example.org/a"},{name:"channel b",id:2,url:"http://example.org/b"},{name:"channel c",id:3,url:"http://example.org/c"},{name:"channel d",id:4,url:"http://example.org/d"}],asdfdafsdfadfadfdfs:[{name:"channel e",id:5,url:"http://example.org/e"},{name:"channel f",id:6,url:"http://example.org/f"},{name:"channel g",id:7,url:"http://example.org/g"}],qqqqqq:[{name:"channel h",id:8,url:"http://example.org/h"},{name:"channel i",id:9,url:"http://example.org/i"},{name:"channel j",id:10,url:"http://example.org/j"}],rrasdfasdadfdsfdasfadsdfdf:[{name:"channel k",id:11,url:"http://example.org/k"},{name:"channel l",id:12,url:"http://example.org/l"},{name:"channel m",id:13,url:"http://example.org/m"},{name:"channel n",id:14,url:"http://example.org/n"},{name:"channel o",id:15,url:"http://example.org/o"},{name:"channel p",id:16,url:"http://example.org/p"}]};return Promise.resolve(e)}async getChannelGroupings(){var e=await this.getDefaultChannelGroupings(),a=this.getCustomChannelGroupings();if(null===a)return Promise.resolve(e);const t=Object.values(a).flat().map((e=>e.id)),n=Object.values(e).flat().map((e=>e.id));if(t.length==n.length)return Promise.resolve(a);const s=n.filter((e=>!t.includes(e))),r=o.unngroupedGroupingName;a.hasOwnProperty(r)||(a[r]=[]);const l=Object.values(e).flat(),i=l.filter((e=>s.includes(e.id)));a[r]=a[r].concat(i);const c=Object.keys(a);return c.forEach((e=>{0==a[e].length&&delete a[e]})),this.saveCustomChannelGroupings(a),Promise.resolve(a)}}},6003:(e,a,t)=>{t.r(a),t.d(a,{default:()=>T});var n=t(3673),s=t(2323);const o={class:"col-xs-12 col-sm-12 col-md-3"},r={class:"row justify-center"},l={class:"row justify-center"},i={class:"col-xs-12 col-sm-12 col-md-9"},c={class:"row q-mt-md text-h5"},u={class:"row q-col-gutter-md q-mt-md q-mr-md q-ml-md"},d={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},p=(0,n.Wm)("div",{class:"text-h6"}," Share by Grouping ",-1),m={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},h=(0,n.Wm)("div",{class:"text-h6"}," Views by Day and Grouping ",-1),y={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},g=(0,n.Wm)("div",{class:"text-h6"}," Views by Day of Week and Grouping ",-1),f={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},v=(0,n.Wm)("div",{class:"text-h6"}," Share by Grouping and Channel ",-1),w={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},D=(0,n.Wm)("div",{class:"text-h6"}," Views by Day and Channel ",-1);function b(e,a,t,b,G,B){const C=(0,n.up)("ReportPeriodSelector"),O=(0,n.up)("q-btn"),W=(0,n.up)("apexchart"),Y=(0,n.up)("q-card"),x=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(x,{class:"row"},{default:(0,n.w5)((()=>[(0,n.Wm)("div",o,[(0,n.Wm)("div",r,[(0,n.Wm)(C,{from:b.dateRange.from,to:b.dateRange.to,onReportRequested:b.handleReportRequested},null,8,["from","to","onReportRequested"])]),(0,n.Wm)("div",l,[(0,n.Wm)(O,{type:"a",href:"/#/ChannelGroupings",label:"Customize Groupings",push:""})])]),(0,n.Wm)("div",i,[(0,n.Wm)("div",c,"Youtube Statistics for "+(0,s.zw)(b.dateRange.from)+" to "+(0,s.zw)(b.dateRange.to),1),(0,n.Wm)("div",u,[(0,n.Wm)("div",d,[(0,n.Wm)(Y,{class:"fit q-pl-sm q-pr-sm q-pt-sm"},{default:(0,n.w5)((()=>[(0,n.Wm)("div",null,[p,(0,n.Wm)(W,{type:"donut",options:b.shareByGroupingOptions,series:b.shareByGroupingSeries},null,8,["options","series"])])])),_:1})]),(0,n.Wm)("div",m,[(0,n.Wm)(Y,{class:"fit q-pl-sm q-pr-sm q-pt-sm"},{default:(0,n.w5)((()=>[(0,n.Wm)("div",null,[h,(0,n.Wm)(W,{type:"area",series:b.viewsByDayAndGroupingData,options:b.viewsByDayAndGroupingOptions},null,8,["series","options"])])])),_:1})]),(0,n.Wm)("div",y,[(0,n.Wm)(Y,{class:"q-pl-sm q-pr-sm q-pt-sm"},{default:(0,n.w5)((()=>[(0,n.Wm)("div",null,[g,(0,n.Wm)(W,{type:"bar",options:b.viewsByDayOfWeekAndGroupingOptions,series:b.viewsByDayOfWeekAndGroupingData},null,8,["options","series"])])])),_:1})]),(0,n.Wm)("div",f,[(0,n.Wm)(Y,{class:"q-pl-sm q-pr-sm q-pt-sm"},{default:(0,n.w5)((()=>[(0,n.Wm)("div",null,[v,(0,n.Wm)(W,{type:"treemap",series:b.viewsByChannelCollectedByGroupingData,options:b.viewsByChannelCollectedByGroupingOptions},null,8,["series","options"])])])),_:1})]),(0,n.Wm)("div",w,[(0,n.Wm)(Y,{class:"q-pl-sm q-pr-sm q-pt-sm"},{default:(0,n.w5)((()=>[(0,n.Wm)("div",null,[D,(0,n.Wm)(W,{type:"line",series:b.viewsByDayAndChannelData,options:b.viewsByDayAndChannelOptions},null,8,["series","options"])])])),_:1})])])])])),_:1})}var G=t(1959),B=t(2661);const C=(0,n.Wm)("div",{class:"text-h6"},"Select Report Period",-1);function O(e,a,t,s,o,r){const l=(0,n.up)("q-card-section"),i=(0,n.up)("q-separator"),c=(0,n.up)("q-date"),u=(0,n.up)("q-card");return(0,n.wg)(),(0,n.j4)(u,{class:"no-box-shadow"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,null,{default:(0,n.w5)((()=>[C])),_:1}),(0,n.Wm)(i,{dark:""}),(0,n.Wm)(l,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:s.dateRange,"onUpdate:modelValue":a[1]||(a[1]=e=>s.dateRange=e),minimal:"",range:"",onRangeEnd:s.reportRequested},null,8,["modelValue","onRangeEnd"])])),_:1})])),_:1})}const W={props:{from:{required:!0,type:String},to:{required:!0,type:String}},emits:["reportRequested"],setup(e,{emit:a}){const t=(0,G.iH)({from:e.from,to:e.to}),n=e=>{a("reportRequested",t.value)};return{reportRequested:n,dateRange:t}}};var Y=t(151),x=t(5589),q=t(5869),k=t(6950),M=t(7518),j=t.n(M);W.render=O;const _=W;j()(W,"components",{QCard:Y.Z,QCardSection:x.Z,QSeparator:q.Z,QDate:k.Z});var A=t(2585),R=t.n(A),P=t(3308);const{subtractFromDate:Z,formatDate:V}=B.ZP,E={components:{ReportPeriodSelector:_,apexchart:R()},setup(){const e=new Date,a=Z(e,{days:7}),t=V(e,"MMM DD, YYYY"),n=V(a,"MMM DD, YYYY"),s=(0,G.iH)({from:n,to:t}),o=new P.Z,r=(0,G.iH)({}),l=(0,G.iH)([]),i=(0,G.iH)([]),c={chart:{stacked:!0,toolbar:{show:!0},zoom:{enabled:!1}},xaxis:{type:"datetime"},dataLabels:{enabled:!1}},u=(0,G.iH)([]),d={chart:{type:"bar",stacked:!0,toolbar:{show:!0},zoom:{enabled:!1}},xaxis:{categories:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},p=(0,G.iH)([]),m=(0,G.iH)({type:"treemap",tooltip:{followCursor:!0,custom:function({series:e,seriesIndex:a,dataPointIndex:t,w:n}){const s=p.value[a].data[t];return'<div><img src="https://groundnews.b-cdn.net/interests/6d1f190966b7aacd4beacae2e1caeea8b7b9cf29_circle.png" width="100"><br>Share of Grouping: '+s.shareOfGrouping+"</div>"}}}),h=(0,G.iH)([]),y={chart:{stacked:!1,toolbar:{show:!0},zoom:{enabled:!0}},xaxis:{type:"datetime"},dataLabels:{enabled:!1}},g=e=>{s.value.from=V(e.from,"MMM DD, YYYY"),s.value.to=V(e.to,"MMM DD, YYYY"),o.fetchData(e.from,e.to).then((e=>{r.value={labels:Object.keys(e.viewsByGrouping)},l.value=Object.values(e.viewsByGrouping),i.value=e.viewsByDayAndGrouping,u.value=e.viewsByDayOfWeekAndGrouping,p.value=e.viewsByChannelCollectedByGrouping,h.value=e.viewsByDayAndChannel}))};return o.fetchData(V(a,"YYYY/MM/DD"),V(e,"YYYY/MM/DD")).then((e=>{r.value={labels:Object.keys(e.viewsByGrouping)},l.value=Object.values(e.viewsByGrouping),i.value=e.viewsByDayAndGrouping,u.value=e.viewsByDayOfWeekAndGrouping,p.value=e.viewsByChannelCollectedByGrouping,h.value=e.viewsByDayAndChannel})),{dateRange:s,handleReportRequested:g,shareByGroupingOptions:r,shareByGroupingSeries:l,viewsByDayAndGroupingData:i,viewsByDayAndGroupingOptions:c,viewsByDayOfWeekAndGroupingOptions:d,viewsByDayOfWeekAndGroupingData:u,viewsByChannelCollectedByGroupingData:p,viewsByChannelCollectedByGroupingOptions:m,viewsByDayAndChannelData:h,viewsByDayAndChannelOptions:y}}};var S=t(4379),H=t(6281);E.render=b;const T=E;j()(E,"components",{QPage:S.Z,QBtn:H.Z,QCard:Y.Z})}}]);